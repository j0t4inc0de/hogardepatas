{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hogar de 4 Patas - Hogares Temporales</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <style>
        body {
            background-image: url("{% static 'img/grupo-cachorros.jpg' %}");
            font-family: 'Poppins', sans-serif;
            color: #1f3f5b;
        }

        .header-section {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 30px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .main-title {
            font-size: 40px;
            font-weight: 700;
            color: #215583;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            display: inline-block;
        }

        .main-title::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #5ca2d4, #5ca2d4);
            border-radius: 2px;
        }

        .subtitle {
            font-size: 1.5rem;
            color: #5ca2d4;
            margin: 20px auto;
            max-width: 800px;
            line-height: 1.6;
            position: relative;
            padding: 0 20px;
        }

        .subtitle::before,
        .subtitle::after {
            content: "♥";
            color: #215583;
            font-size: 1.8rem;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }

        .subtitle::before {
            left: -10px;
        }

        .subtitle::after {
            right: -10px;
        }

        .paw-icon {
            color: #215583;
            margin: 0 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-5px);
            }
        }

        .icono-volver {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 35px;
            color: #ff4b4b;
            text-decoration: none;
            z-index: 1000;
        }

        .icono-volver:hover {
            color: #ff6b6b;
        }

        .hogar-temporal-card {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .hogar-carousel {
            width: 300px;
            height: 300px;
            border-radius: 10px;
            overflow: hidden;
        }

        .carousel-item img {
            width: 300px;
            height: 300px;
            object-fit: cover;
        }

        .hogar-info {
            flex: 1;
            min-width: 300px;
        }

        .rating {
            color: #ffd700;
            font-size: 20px;
            margin: 10px 0;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat-item {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        #hogares-temporales {
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
        }

        .ubicacion {
            color: #666;
            margin: 10px 0;
        }

        .ubicacion i {
            color: #ff4b4b;
            margin-right: 5px;
        }

        .carousel-control-prev,
        .carousel-control-next {
            background-color: rgba(0, 0, 0, 0.3);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            top: 50%;
            transform: translateY(-50%);
        }

        .carousel-indicators {
            bottom: 0;
            margin-bottom: 0.5rem;
        }

        .postulacion-section {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .postulacion-title {
            color: #215583;
            font-size: 2rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .btn-postular {
            background-color: #5ca2d4;
            color: white;
            padding: 15px 40px;
            border-radius: 25px;
            border: none;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            display: inline-block;
        }

        .btn-postular:hover {
            background-color: #5ca2d4;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 75, 75, 0.3);
            color: white;
        }

        .modal-content {
            border-radius: 15px;
            border: none;
        }

        .modal-header {
            background-color: #5ca2d4;
            color: white;
            border-radius: 15px 15px 0 0;
            padding: 20px;
        }

        .modal-title {
            font-weight: 600;
        }

        .modal-body {
            padding: 25px;
        }

        .form-label {
            font-weight: 500;
            color: #444;
        }

        .form-control {
            border-radius: 8px;
            padding: 10px;
            border: 1px solid #ddd;
            margin-bottom: 15px;
        }

        .form-control:focus {
            border-color: #ff4b4b;
            box-shadow: 0 0 0 0.2rem rgba(255, 75, 75, 0.25);
        }

        .btn-submit {
            background-color: #5ca2d4;
            color: white;
            padding: 10px 30px;
            border-radius: 25px;
            border: none;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
        }

        .btn-submit:hover {
            background-color: #215583;
        }
    </style>
</head>
<body>
    <a href="{% url 'index' %}" class="icono-volver" title="Volver al inicio">
        <i class="fa-solid fa-xmark"></i>
    </a>

    <section id="hogares-temporales">
        <div class="header-section">
            <h1 class="main-title">
                <i class="fas fa-paw paw-icon"></i>
                Hogares Temporales
                <i class="fas fa-paw paw-icon"></i>
            </h1>
            <p class="subtitle">
                Conoce a las familias extraordinarias que abren sus corazones y hogares 
                para dar amor y cuidado a nuestros peludos mientras encuentran su familia definitiva
            </p>
        </div>

        <!-- Primer hogar temporal -->
        <div class="hogar-temporal-card">
            <div id="carousel1" class="carousel slide hogar-carousel" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carousel1" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#carousel1" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#carousel1" data-bs-slide-to="2"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="{% static 'img/casa1.jpg' %}" alt="Casa de María 1">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/casa2.jpg' %}" alt="Casa de María 2">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/casa3.jpg' %}" alt="Casa de María 3">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carousel1" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carousel1" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>

            <div class="hogar-info">
                <h2>Casa de María</h2>
                <div class="rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                    <span>(4.5)</span>
                </div>
                <p class="ubicacion">
                    <i class="fas fa-map-marker-alt"></i>
                    Los Ángeles, Población San Carlos, Pasaje 3
                </p>
                <p>María ha sido hogar temporal por más de 2 años. Cuenta con un amplio patio y experiencia en el cuidado de cachorros y perros adultos. Su dedicación y amor por los animales la han convertido en uno de nuestros hogares más confiables.</p>
                <div class="stats">
                    <div class="stat-item">
                        <i class="fas fa-dog"></i>
                        <h3>25</h3>
                        <p>Perritos ayudados</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-calendar-alt"></i>
                        <h3>2.5</h3>
                        <p>Años de experiencia</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-home"></i>
                        <h3>4</h3>
                        <p>Capacidad actual</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Segundo hogar temporal -->
        <div class="hogar-temporal-card">
            <div id="carousel2" class="carousel slide hogar-carousel" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carousel2" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#carousel2" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#carousel2" data-bs-slide-to="2"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="{% static 'img/casa4.jpg' %}" alt="Familia Pérez 1">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/hogar2-2.jpg' %}" alt="Familia Pérez 2">
                    </div>
                    <div class="carousel-item">
                        <img src="{% static 'img/hogar2-3.jpg' %}" alt="Familia Pérez 3">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carousel2" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carousel2" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>

            <div class="hogar-info">
                <h2>Familia Pérez</h2>
                <div class="rating">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <span>(5.0)</span>
                </div>
                <p class="ubicacion">
                    <i class="fas fa-map-marker-alt"></i>
                    Laja, Villa Los Ríos, Calle Principal 123
                </p>
                <p>La familia Pérez ha transformado su hogar en un refugio acogedor para perros en necesidad. Especialistas en rehabilitación de perros tímidos y asustadizos, han logrado transformar la vida de muchos peludos.</p>
                <div class="stats">
                    <div class="stat-item">
                        <i class="fas fa-dog"></i>
                        <h3>18</h3>
                        <p>Perritos ayudados</p>
                    </div>
                    <div class<div class="stat-item">
                        <i class="fas fa-calendar-alt"></i>
                        <h3>1.5</h3>
                        <p>Años de experiencia</p>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-home"></i>
                        <h3>3</h3>
                        <p>Capacidad actual</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Nueva sección de postulación -->
        <div class="postulacion-section">
            <h2 class="postulacion-title">¿Quieres ser un Hogar Temporal?</h2>
            <p>Únete a nuestra red de familias que brindan amor y cuidado temporal a perritos necesitados</p>
            <button class="btn-postular" data-bs-toggle="modal" data-bs-target="#postulacionModal">
                <i class="fas fa-paw me-2"></i>Postular como Hogar Temporal
            </button>
        </div>
    </section>

    <!-- Modal de Postulación -->
    <div class="modal fade" id="postulacionModal" tabindex="-1" aria-labelledby="postulacionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="postulacionModalLabel">
                        <i class="fas fa-home me-2"></i>Postulación para Hogar Temporal
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="postulacionForm">
                        <div class="mb-3">
                            <label for="nombre" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="nombre" name="nombre" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="apellido" class="form-label">Apellido</label>
                            <input type="text" class="form-control" id="apellido" name="apellido" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="rut" class="form-label">RUT</label>
                            <input type="text" class="form-control" id="rut" name="rut" placeholder="12.345.678-9" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="direccion" class="form-label">Dirección</label>
                            <input type="text" class="form-control" id="direccion" name="direccion" required>
                        </div>
                        
                        <div class="mb-3">
                            <label for="telefono" class="form-label">Número Telefónico</label>
                            <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="+56 9 XXXX XXXX" required>
                        </div>
                        
                        <button type="submit" class="btn-submit">
                            <i class="fas fa-paper-plane me-2"></i>Enviar Postulación
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <!-- Script para manejar el formulario -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Validación de RUT 
            function validarRut(rut) {
                // Limpiar el RUT de puntos y guión
                rut = rut.replace(/\./g, '').replace(/-/g, '');
                var dv = rut.slice(-1);
                var numero = rut.slice(0, -1);
                var suma = 0;
                var multiplo = 2;

                // calculadora de digitos despues del guion para su validacion 
                for(var i = numero.length - 1; i >= 0; i--) {
                    suma += numero[i] * multiplo;
                    multiplo = multiplo === 7 ? 2 : multiplo + 1;
                }

                var dvEsperado = 11 - (suma % 11);
                dvEsperado = dvEsperado === 11 ? '0' : dvEsperado === 10 ? 'K' : dvEsperado.toString();

                return dv.toUpperCase() === dvEsperado;
            }

            // reescribe rut mientras se escribe 
            document.getElementById('rut').addEventListener('input', function(e) {
                let rut = e.target.value.replace(/\./g, '').replace(/-/g, '');
                if(rut.length > 1) {
                    rut = rut.slice(0, -1) + '-' + rut.slice(-1);
                }
                if(rut.length > 4) {
                    rut = rut.slice(0, -5) + '.' + rut.slice(-5);
                }
                if(rut.length > 8) {
                    rut = rut.slice(0, -9) + '.' + rut.slice(-9);
                }
                e.target.value = rut;
            });
            

            // rescribe inicales del telefono 
            document.getElementById('telefono').addEventListener('input', function(e) {
                let telefono = e.target.value.replace(/\D/g, '');
                if(telefono.startsWith('56')) {
                    telefono = telefono.slice(2);
                }
                if(telefono.length > 0) {
                    telefono = '+56 ' + telefono;
                }
                if(telefono.length > 7) {
                    telefono = telefono.slice(0, 7) + ' ' + telefono.slice(7);
                }
                e.target.value = telefono;
            });

            // Manejar envío del formulario
        document.getElementById('postulacionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validar RUT
            const rut = document.getElementById('rut').value;
            if(!validarRut(rut)) {
                alert('Por favor ingrese un RUT válido');
                return;
            }

            // atrapa los datos del formulariio
            const nombre = document.getElementById('nombre').value;
            const apellido = document.getElementById('apellido').value;
            const direccion = document.getElementById('direccion').value;
            const telefono = document.getElementById('telefono').value;

            // Crear el mensaje para WhatsApp
            const mensaje = `¡Hola! Me gustaría postular como Hogar Temporal.%0A%0A` +
                        `*Datos de la postulación:*%0A` +
                        `Nombre: ${nombre} ${apellido}%0A` +
                        `RUT: ${rut}%0A` +
                        `Dirección: ${direccion}%0A` +
                        `Teléfono: ${telefono}`;

            
            const whatsappLink = `https://wa.me/56985216691?text=${mensaje}`;

            
            alert('¡Formulario completado! Serás redirigido a WhatsApp para enviar tu postulación.');
            
            // Abrir WhatsApp en una nueva pestaña
            window.open(whatsappLink, '_blank');
            
            // reinicia los campos del formulario 
            var modal = bootstrap.Modal.getInstance(document.getElementById('postulacionModal'));
            modal.hide();
            this.reset();
            });
        });
                // envio de formulario 
        document.getElementById('postulacionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // se asegura de validar el rut 
            const rut = document.getElementById('rut').value;
            if(!validarRut(rut)) {
                alert('Por favor ingrese un RUT válido');
                return;
            }

            // Obtener los valores del formulario
            const nombre = document.getElementById('nombre').value;
            const apellido = document.getElementById('apellido').value;
            const direccion = document.getElementById('direccion').value;
            const telefono = document.getElementById('telefono').value;

            // Crear el mensaje para WhatsApp
            const mensaje = `¡Hola! Me gustaría postular como Hogar Temporal.%0A%0A` +
                        `*Datos de la postulación:*%0A` +
                        `Nombre: ${nombre} ${apellido}%0A` +
                        `RUT: ${rut}%0A` +
                        `Dirección: ${direccion}%0A` +
                        `Teléfono: ${telefono}`;

            // Crear el enlace de WhatsApp
            const whatsappLink = `https://wa.me/56985216691?text=${mensaje}`;

            // Mostrar mensaje de éxito
            alert('¡Formulario completado! Serás redirigido a WhatsApp para enviar tu postulación.');
            
            // Abrir WhatsApp en una nueva pestaña
            window.open(whatsappLink, '_blank');
            
            // Cerrar modal y limpiar formulario
            var modal = bootstrap.Modal.getInstance(document.getElementById('postulacionModal'));
            modal.hide();
            this.reset();
        });
    </script>
</body>
</html>